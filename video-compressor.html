<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Compressor - Compresly</title>
    <meta name="description" content="Compress video files online for free with Compresly. Reduce video file size without losing quality. Supports MP4, MOV, and more.">
    <link rel="canonical" href="https://compresly.vercel.app/video-compressor.html">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" integrity="sha512-9usAa10IRO0HhonpyAIVpjrylPvoDwiPUiKdWk5t3PyolY1cOd4DSE0Ga+ri4AuTroPR5aQvXU9xC6qOPnzFeg==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="stylesheet" href="styles.css">
    <script>
        // Google Analytics
        // Paste your Google Analytics code here
    </script>
    <script>
        // Google Tag Manager
        // Paste your Google Tag Manager code here
    </script>
</head>
<body class="bg-gray-100 font-poppins">
    <header class="bg-white shadow-md py-4">
        <div class="container mx-auto flex justify-between items-center px-4">
            <a href="/" class="flex items-center text-xl font-semibold text-gray-800">
                <img src="/logo.png" alt="Compresly Logo" class="mr-2 h-6">
                Compresly
            </a>
            <nav class="hidden md:block">
                <ul class="flex space-x-6">
                    <li><a href="/image-compressor.html" class="text-gray-700 hover:text-blue-600 transition duration-300">Image Compressor</a></li>
                    <li><a href="/pdf-compressor.html" class="text-gray-700 hover:text-blue-600 transition duration-300">PDF Compressor</a></li>
                    <li><a href="/audio-compressor.html" class="text-gray-700 hover:text-blue-600 transition duration-300">Audio Compressor</a></li>
                    <li><a href="/video-compressor.html" class="text-gray-700 hover:text-blue-600 transition duration-300">Video Compressor</a></li>
                     <li><a href="/contact-us.html" class="text-gray-700 hover:text-blue-600 transition duration-300">Contact Us</a></li>
                </ul>
            </nav>
            <div class="md:hidden">
                <button id="hamburger-btn" class="text-gray-700 focus:outline-none" aria-label="Toggle Navigation">
                    <i class="fas fa-bars text-xl"></i>
                </button>
                <div id="hamburger-menu" class="hidden fixed top-0 right-0 h-screen w-64 bg-white shadow-lg z-50">
                    <div class="p-4">
                        <div class="flex justify-end mb-4">
                            <button id="close-menu-btn" class="text-gray-700 focus:outline-none" aria-label="Close Menu">
                                <i class="fas fa-times text-xl"></i>
                            </button>
                        </div>
                        <nav class="block">
                            <ul class="space-y-4">
                                <li><a href="/image-compressor.html" class="block text-gray-700 hover:text-blue-600 transition duration-300 py-2">Image Compressor</a></li>
                                <li><a href="/pdf-compressor.html" class="block text-gray-700 hover:text-blue-600 transition duration-300 py-2">PDF Compressor</a></li>
                                <li><a href="/audio-compressor.html" class="block text-gray-700 hover:text-blue-600 transition duration-300 py-2">Audio Compressor</a></li>
                                <li><a href="/video-compressor.html" class="block text-gray-700 hover:text-blue-600 transition duration-300 py-2">Video Compressor</a></li>
                                 <li><a href="/contact-us.html" class="block text-gray-700 hover:text-blue-600 transition duration-300 py-2">Contact Us</a></li>
                            </ul>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8">
        <section class="text-center mb-12">
            <h1 class="text-3xl font-semibold text-gray-800 mb-4">Online Video Compressor</h1>
            <p class="text-lg text-gray-600">Reduce video file size online for free without losing quality.</p>
        </section>

        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <div class="flex flex-col items-center justify-center">
                <label for="video-upload" class="cursor-pointer bg-blue-500 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-md transition duration-300 ease-in-out">
                    <i class="fas fa-upload mr-2"></i> Select Video File
                </label>
                <input type="file" id="video-upload" accept="video/*" class="hidden">
                <p id="file-name" class="mt-4 text-gray-600"></p>
                <div id="compression-options" class="mt-6 w-full max-w-md">
                    <div class="mb-4">
                        <label for="quality" class="block text-gray-700 text-sm font-bold mb-2">Compression Quality:</label>
                        <input type="range" id="quality" min="0" max="100" value="50" class="w-full">
                        <p id="quality-value" class="text-center text-gray-600 text-sm">Medium (50%)</p>
                    </div>
                    <div class="mb-4">
                        <label for="format" class="block text-gray-700 text-sm font-bold mb-2">Output Format:</label>
                        <select id="format" class="shadow appearance-none border rounded w-full py-3 px-4 text-gray-700 leading-tight focus:outline-none focus:shadow-outline">
                            <option value="mp4">MP4</option>
                            <option value="webm">WebM</option>
                            <option value="mov">MOV</option>
                        </select>
                    </div>
                    <button id="compress-btn" class="bg-green-500 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-md transition duration-300 ease-in-out w-full">
                        <i class="fas fa-compress mr-2"></i> Compress Video
                    </button>
                </div>
                <div id="progress-container" class="mt-6 w-full max-w-md bg-gray-200 rounded-full h-2.5 hidden">
                    <div id="progress-bar" class="bg-blue-500 h-2.5 rounded-full" style="width: 0%" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100%"></div>
                </div>
                <div id="download-section" class="mt-6 text-center hidden">
                    <p class="text-gray-700 mb-4">Your video has been compressed successfully!</p>
                    <a id="download-link" href="#" class="bg-green-500 hover:bg-green-700 text-white font-bold py-3 px-6 rounded-md transition duration-300 ease-in-out inline-block" download>
                        <i class="fas fa-download mr-2"></i> Download Video
                    </a>
                    <p id="original-size" class="text-gray-600 mt-2"></p>
                    <p id="compressed-size" class="text-gray-600"></p>
                    <p id="saved-percentage" class="text-green-600 font-semibold"></p>
                </div>
                <div id="error-message" class="mt-6 text-red-500 font-semibold text-center hidden">
                    <i class="fas fa-exclamation-triangle mr-2"></i> An error occurred. Please try again.
                </div>
            </div>
        </section>

        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Key Features</h2>
            <ul class="list-disc list-inside space-y-2 text-gray-700">
                <li><strong>Free Online Tool:</strong> Compress videos directly in your browser without any software installation.</li>
                <li><strong>Supports Multiple Formats:</strong> Supports a wide range of video formats, including MP4, MOV, WebM, and more.</li>
                <li><strong>Customizable Compression:</strong> Choose the desired compression level to balance file size and video quality.</li>
                <li><strong>Fast and Easy to Use:</strong> Simple and intuitive interface for quick video compression.</li>
                <li><strong> збереження Quality:</strong> Advanced compression алгоритми to reduce video file size with minimal quality loss.</li>
            </ul>
        </section>

        <section class="bg-white rounded-lg shadow-md p-6 mb-8">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">How to Compress Video</h2>
            <ol class="list-decimal list-inside space-y-2 text-gray-700">
                <li><strong>Upload Video:</strong> Click the "Select Video File" button to upload the video you want to compress.</li>
                <li><strong>Configure Compression:</strong> Choose the compression quality and output format.</li>
                <li><strong>Compress Video:</strong> Click the "Compress Video" button to start the compression process.</li>
                <li><strong>Download Video:</strong> Once the compression is complete, click the "Download Video" button to save the compressed video.</li>
            </ol>
        </section>

        <section class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-semibold text-gray-800 mb-4">Why Choose Compresly?</h2>
            <p class="text-gray-700">
                Compresly offers a fast, easy, and free solution for compressing video files online. Our tool is designed to reduce video file size without compromising качество, making it идеальным for sharing videos on social media, sending them via email, or saving storage space.
            </p>
        </section>
    </main>

    <footer class="bg-gray-200 py-6">
        <div class="container mx-auto px-4">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 text-center md:text-left">
                <div class="mb-4 lg:mb-0">
                    <a href="/" class="flex items-center text-xl font-semibold text-gray-800">
                        <img src="/logo.png" alt="Compresly Logo" class="mr-2 h-6">
                        Compresly
                    </a>
                </div>
                <div class="mb-4 lg:mb-0">
                    <h4 class="font-semibold text-gray-700 mb-2">Tools</h4>
                    <ul class="text-gray-600">
                        <li><a href="/image-compressor.html" class="hover:text-blue-600 transition duration-300">Image Compressor</a></li>
                        <li><a href="/pdf-compressor.html" class="hover:text-blue-600 transition duration-300">PDF Compressor</a></li>
                        <li><a href="/audio-compressor.html" class="hover:text-blue-600 transition duration-300">Audio Compressor</a></li>
                        <li><a href="/video-compressor.html" class="hover:text-blue-600 transition duration-300">Video Compressor</a></li>
                    </ul>
                </div>
                <div class="mb-4 lg:mb-0">
                    <h4 class="font-semibold text-gray-700 mb-2">About Us</h4>
                    <ul class="text-gray-600">
                         <li><a href="/contact-us.html" class="hover:text-blue-600 transition duration-300">Contact Us</a></li>
                        <li><a href="/privacy-policy.html" class="hover:text-blue-600 transition duration-300">Privacy Policy</a></li>
                        <li><a href="/terms-of-service.html" class="hover:text-blue-600 transition duration-300">Terms of Service</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-gray-700 mb-2">Connect With Us</h4>
                    <div class="flex justify-center md:justify-start space-x-4">
                        <a href="https://twitter.com/" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-blue-400 transition duration-300" aria-label="Twitter"><i class="fab fa-twitter"></i></a>
                        <a href="https://www.facebook.com/" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-blue-600 transition duration-300" aria-label="Facebook"><i class="fab fa-facebook"></i></a>
                        <a href="https://www.instagram.com/" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-pink-500 transition duration-300" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
                        <a href="https://www.youtube.com/" target="_blank" rel="noopener noreferrer" class="text-gray-600 hover:text-red-600 transition duration-300" aria-label="YouTube"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
            </div>
            <div class="text-center mt-4 text-gray-600">
                <p>© 2023 Compresly. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script src="script.js"></script>
    <script>
    const fileInput = document.getElementById('video-upload');
    const fileNameDisplay = document.getElementById('file-name');
    const compressionOptions = document.getElementById('compression-options');
    const compressButton = document.getElementById('compress-btn');
    const qualityInput = document.getElementById('quality');
    const qualityValueDisplay = document.getElementById('quality-value');
    const formatSelect = document.getElementById('format');
    const progressContainer = document.getElementById('progress-container');
    const progressBar = document.getElementById('progress-bar');
    const downloadSection = document.getElementById('download-section');
    const downloadLink = document.getElementById('download-link');
    const originalSizeDisplay = document.getElementById('original-size');
    const compressedSizeDisplay = document.getElementById('compressed-size');
    const savedPercentageDisplay = document.getElementById('saved-percentage');
    const errorMessage = document.getElementById('error-message');

    let originalFileSize = 0;
    let compressedFileSize = 0;

    const qualityLevels = [
        "Lowest", "Very Low", "Low", "Medium", "High", "Very High", "Highest"
    ];

    qualityInput.addEventListener('input', function() {
        const qualityValue = parseInt(this.value);
        let qualityText = "Medium";
        if (qualityValue <= 10) {
            qualityText = qualityLevels[0];
        } else if (qualityValue > 10 && qualityValue <= 25) {
            qualityText = qualityLevels[1];
        } else if (qualityValue > 25 && qualityValue <= 40) {
            qualityText = qualityLevels[2];
        } else if (qualityValue > 40 && qualityValue <= 60) {
            qualityText = qualityLevels[3];
        } else if (qualityValue > 60 && qualityValue <= 75) {
            qualityText = qualityLevels[4];
        } else if (qualityValue > 75 && qualityValue <= 90) {
            qualityText = qualityLevels[5];
        } else {
            qualityText = qualityLevels[6];
        }
        qualityValueDisplay.textContent = `${qualityText} (${qualityValue}%)`;
    });

    fileInput.addEventListener('change', function() {
        if (this.files.length > 0) {
            const file = this.files[0];
            fileNameDisplay.textContent = `Selected file: ${file.name}`;
            originalFileSize = file.size;
            compressionOptions.classList.remove('hidden');
            errorMessage.classList.add('hidden');
        } else {
            fileNameDisplay.textContent = '';
            compressionOptions.classList.add('hidden');
            downloadSection.classList.add('hidden');
        }
    });

    compressButton.addEventListener('click', async function() {
        if (!fileInput.files || fileInput.files.length === 0) {
            errorMessage.textContent="Please select a video file.";
            errorMessage.classList.remove('hidden');
            return;
        }

        const file = fileInput.files[0];
        const quality = parseInt(qualityInput.value);
        const format = formatSelect.value;

        compressButton.disabled = true;
        progressContainer.classList.remove('hidden');
        downloadSection.classList.add('hidden');
        errorMessage.classList.add('hidden');
        progressBar.style.width = '0%';
        progressBar.setAttribute('aria-valuenow', 0);

        try {
            const compressedBlob = await compressVideo(file, quality, format, (progress) => {
                progressBar.style.width = `${progress}%`;
                progressBar.setAttribute('aria-valuenow', progress);
            });

            if (!compressedBlob) {
                errorMessage.textContent="Compression failed. Please try again.";
                errorMessage.classList.remove('hidden');
                return;
            }
            const compressedFile = new File([compressedBlob], `compressed_video.${format}`, { type: `video/${format}` });
            compressedFileSize = compressedFile.size;
            const savedPercentage = ((originalFileSize - compressedFileSize) / originalFileSize) * 100;

            const url = URL.createObjectURL(compressedFile);
            downloadLink.href = url;
            downloadLink.download = `compressed_video.${format}`;
            originalSizeDisplay.textContent = `Original Size: ${formatFileSize(originalFileSize)}`;
            compressedSizeDisplay.textContent = `Compressed Size: ${formatFileSize(compressedFileSize)}`;
            savedPercentageDisplay.textContent = `Saved: ${savedPercentage.toFixed(2)}%`;

            downloadSection.classList.remove('hidden');
            progressContainer.classList.add('hidden');
            compressButton.disabled = false;
            URL.revokeObjectURL(url);

        } catch (error) {
            console.error("Compression error:", error);
            errorMessage.textContent="An error occurred during compression. Please check your file and try again.";
            errorMessage.classList.remove('hidden');
            progressContainer.classList.add('hidden');
            compressButton.disabled = false;
        }
    });

    function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB', 'TB', 'PB', 'EB', 'ZB', 'YB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    async function compressVideo(file, quality, format, onProgress) {
        return new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.onerror = () => reject('Failed to read file');

            reader.onload = async (event) => {
                try{
                    const arrayBuffer = event.target.result;
                    const videoBlob = new Blob([arrayBuffer], { type: file.type });
                    const videoURL = URL.createObjectURL(videoBlob);

                    const video = document.createElement('video');
                    video.src = videoURL;
                    video.muted = true;
                    video.autoplay = true;

                    video.onerror = (e) => {
                        console.error("Video element error", e);
                        URL.revokeObjectURL(videoURL);
                        reject("Error loading video for compression");
                    }

                    video.onloadeddata = async () => {
                        try {
                            const canvas = document.createElement('canvas');
                            const ctx = canvas.getContext('2d');

                            canvas.width = video.videoWidth;
                            canvas.height = video.videoHeight;

                            ctx.drawImage(video, 0, 0, canvas.width, canvas.height);

                            let outputFormat = 'video/mp4';
                            if (format === 'webm') {
                                outputFormat = 'video/webm';
                            } else if (format === 'mov') {
                                outputFormat = 'video/quicktime';
                            }

                            const compressedBlob = await new Promise((resolve, reject) => {
                                canvas.toBlob(
                                    (blob) => {
                                        if (blob) {
                                            resolve(blob);
                                        } else {
                                            reject("Failed to create blob from canvas");
                                        }
                                    },
                                    outputFormat,
                                    quality / 100
                                );
                            });
                            URL.revokeObjectURL(videoURL);
                            resolve(compressedBlob);
                        } catch (error) {
                            URL.revokeObjectURL(videoURL);
                            reject(error);
                        }
                    };
                } catch(error){
                    reject(error);
                }
            };
            reader.readAsArrayBuffer(file);
        });
    }
    </script>
</body>
</html>
